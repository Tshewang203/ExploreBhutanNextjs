"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},92561:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>P,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var a={};t.r(a),t.d(a,{POST:()=>m});var s=t(95419),i=t(69108),o=t(99678),n=t(78070),u=t(7529),l=t(99340),d=t(69548);async function m(e){try{await (0,l.Z)();let r=await e.json();if(await d.Z.findOne({email:r.email}))return n.Z.json({error:"User already exists"},{status:400});let t=await u.ZP.hash(r.password,10),a=(await d.Z.create({firstName:r.firstName,lastName:r.lastName,email:r.email,password:t})).toObject();return delete a.password,n.Z.json({message:"Registration successful",user:a},{status:201})}catch(e){return console.error("Registration error:",e),n.Z.json({error:"Registration failed"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\api\\auth\\register\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:w,staticGenerationBailout:f}=c,P="/api/auth/register/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},99340:(e,r,t)=>{t.d(r,{Z:()=>n});var a=t(11185),s=t.n(a);let i=process.env.MONGODB_URI;if(!i)throw Error("Please define the MONGODB_URI environment variable inside .env");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let n=async function(){if(o.conn)return o.conn;o.promise||(o.promise=s().connect(i,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},69548:(e,r,t)=>{t.d(r,{Z:()=>n});var a=t(11185),s=t.n(a),i=t(7529);let o=new(s()).Schema({firstName:{type:String,required:[!0,"First name is required"],trim:!0},lastName:{type:String,required:[!0,"Last name is required"],trim:!0},email:{type:String,required:[!0,"Email is required"],unique:!0,lowercase:!0,trim:!0,match:[/.+@.+\..+/,"Please enter a valid email address"]},password:{type:String,required:[!0,"Password is required"],minlength:[6,"Password must be at least 6 characters long"]}},{timestamps:!0});o.pre("save",async function(e){if(!this.isModified("password"))return e();try{let r=await i.ZP.genSalt(10);this.password=await i.ZP.hash(this.password,r),e()}catch(r){e(r)}}),o.methods.matchPassword=async function(e){return await i.ZP.compare(e,this.password)};let n=s().models.Registration||s().model("Registration",o)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,118,70],()=>t(92561));module.exports=a})();