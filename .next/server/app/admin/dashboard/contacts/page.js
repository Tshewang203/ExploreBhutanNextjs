(()=>{var e={};e.id=364,e.ids=[364],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var a=s(50482),r=s(69108),n=s(62563),i=s.n(n),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["admin",{children:["dashboard",{children:["contacts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,39845)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\dashboard\\contacts\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,48964)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,52308)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\dashboard\\contacts\\page.jsx"],u="/admin/dashboard/contacts/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/dashboard/contacts/page",pathname:"/admin/dashboard/contacts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},87938:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},39960:(e,t,s)=>{Promise.resolve().then(s.bind(s,62705))},80623:(e,t,s)=>{Promise.resolve().then(s.bind(s,84204))},60790:(e,t,s)=>{Promise.resolve().then(s.bind(s,33269))},84204:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(95344),r=s(3729),n=s(47674),i=s(8428),o=s(44669);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),{data:u,status:m}=(0,n.useSession)(),x=(0,i.useRouter)();(0,r.useEffect)(()=>{"unauthenticated"===m?x.push("/admin/login"):"authenticated"===m&&p()},[m,x]);let p=async()=>{try{d(!0);let e=await fetch("/api/contact"),s=await e.json();t(s)}catch(e){o.Am.error("Failed to fetch messages")}finally{d(!1)}},h=async e=>{if(confirm("Are you sure you want to delete this message?"))try{if((await fetch(`/api/contact/${e}`,{method:"DELETE"})).ok)o.Am.success("Message deleted"),p();else throw Error("Failed to delete")}catch(e){o.Am.error("Failed to delete message")}},g=async e=>{try{if((await fetch(`/api/contact/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"read"})})).ok)o.Am.success("Message marked as read"),p();else throw Error("Failed to update")}catch(e){o.Am.error("Failed to update message status")}};return c?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[var(--dzong-blue)]"})}):a.jsx("div",{className:"min-h-screen bg-[var(--rice-white)]",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold font-['Cinzel'] text-[var(--dzong-blue)]",children:"Contact Messages"}),a.jsx("div",{className:"h-1 w-32 bg-[var(--river-blue)] mt-2 rounded-full"})]}),(0,a.jsxs)("div",{className:"temple-card px-8 py-4 flex items-center gap-3",children:[a.jsx("i",{className:"bi bi-envelope-paper text-2xl text-[var(--river-blue)]"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[var(--mountain-slate)] block text-sm",children:"Total Messages"}),a.jsx("span",{className:"text-2xl font-bold text-[var(--dzong-blue)]",children:e.length})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[e.map(e=>a.jsx("div",{className:`temple-card p-6 transition-all duration-300 hover:-translate-y-1 ${"unread"===e.status?"border-l-4 border-[var(--river-blue)]":""}`,children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("i",{className:"bi bi-chat-left-text text-[var(--river-blue)] text-xl"}),a.jsx("h2",{className:"text-xl font-semibold font-['Cinzel'] text-[var(--dzong-blue)]",children:e.subject}),"unread"===e.status&&a.jsx("span",{className:"px-3 py-1 bg-[var(--rice-white)] text-[var(--river-blue)] text-xs rounded-full font-medium",children:"New Message"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-person text-[var(--mountain-slate)]"}),a.jsx("span",{className:"text-[var(--mountain-slate)] font-medium",children:e.name})]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-envelope text-[var(--mountain-slate)]"}),a.jsx("span",{className:"text-[var(--mountain-slate)]",children:e.email})]})]}),a.jsx("p",{className:"mt-4 text-[var(--text-dark)] bg-[var(--rice-white)] p-4 rounded-lg",children:e.message}),(0,a.jsxs)("p",{className:"flex items-center gap-2 text-sm text-[var(--mountain-slate)] mt-4",children:[a.jsx("i",{className:"bi bi-clock"}),"Received: ",new Date(e.createdAt).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex gap-3 ml-6",children:["unread"===e.status&&(0,a.jsxs)("button",{onClick:()=>g(e._id),className:"btn-primary py-2 px-4 flex items-center gap-2 text-sm group",children:[a.jsx("i",{className:"bi bi-check-circle group-hover:scale-110 transition-transform"}),"Mark as Read"]}),(0,a.jsxs)("button",{onClick:()=>h(e._id),className:"bg-[var(--prayer-red)] text-white px-4 py-2 rounded-lg hover:opacity-90 transition-all flex items-center gap-2 text-sm group",children:[a.jsx("i",{className:"bi bi-trash group-hover:scale-110 transition-transform"}),"Delete"]})]})]})},e._id)),0===e.length&&(0,a.jsxs)("div",{className:"temple-card p-12 text-center",children:[a.jsx("i",{className:"bi bi-inbox text-6xl text-[var(--mountain-slate)] mb-4"}),a.jsx("p",{className:"text-[var(--mountain-slate)] text-lg",children:"No messages received yet"})]})]})]})})}},33269:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(95344),r=s(47674),n=s(8428),i=s(3729);function o({children:e}){let{data:t,status:s}=(0,r.useSession)(),o=(0,n.useRouter)(),l="/admin/login"===(0,n.usePathname)();return((0,i.useEffect)(()=>{"loading"===s||t||l||o.push("/admin/login"),t&&l&&o.push("/admin/dashboard")},[t,s,o,l]),"loading"===s)?a.jsx("div",{className:"min-h-screen bg-[var(--rice-white)] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[var(--dzong-blue)] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-[var(--dzong-blue)] font-['Playfair_Display']",children:"Loading..."})]})}):e}function l({children:e}){return a.jsx(r.SessionProvider,{children:a.jsx(o,{children:e})})}},62705:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(95344),r=s(44669);function n({children:e}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(r.x7,{position:"top-right",toastOptions:{success:{duration:3e3,style:{background:"#4CAF50",color:"#fff",padding:"16px"}},error:{duration:3e3,style:{background:"#f44336",color:"#fff",padding:"16px"}},style:{border:"1px solid #ccc",padding:"16px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}}),e]})}},39845:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\admin\dashboard\contacts\page.jsx`),{__esModule:r,$$typeof:n}=a,i=a.default},48964:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\admin\layout.jsx`),{__esModule:r,$$typeof:n}=a,i=a.default},52308:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,metadata:()=>m});var a=s(25036),r=s(13362),n=s.n(r),i=s(49828),o=s.n(i);s(5023);let l=(0,s(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\providers.jsx`),{__esModule:c,$$typeof:d}=l,u=l.default,m={title:"Explore Bhutan - Your Gateway to the Land of Thunder Dragon",description:"Discover the magic of Bhutan with our curated tours, cultural experiences, and adventure packages.",keywords:"Bhutan, travel, tourism, Buddhist temples, Himalayan kingdom, cultural tours",authors:[{name:"Bhutan Travel"}],openGraph:{title:"Explore Bhutan - Your Gateway to the Land of Thunder Dragon",description:"Discover the magic of Bhutan with our curated tours, cultural experiences, and adventure packages.",url:"https://bhutan-travel.vercel.app",siteName:"Bhutan Travel",locale:"en_US",type:"website"}};function x({children:e}){return(0,a.jsxs)("html",{lang:"en",className:`${n().variable} ${o().variable}`,children:[a.jsx("head",{children:a.jsx("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"})}),a.jsx("body",{className:o().className,children:a.jsx(u,{children:e})})]})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,512,221],()=>s(1217));module.exports=a})();