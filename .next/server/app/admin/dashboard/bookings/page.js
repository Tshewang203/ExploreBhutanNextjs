(()=>{var e={};e.id=229,e.ids=[229],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28238:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o});var a=t(50482),r=t(69108),i=t(62563),n=t.n(i),l=t(68300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["admin",{children:["dashboard",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,25509)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\dashboard\\bookings\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48964)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,52308)),"D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Tshewang Lhamo\\02220251_Project01 - Copy\\src\\app\\admin\\dashboard\\bookings\\page.jsx"],x="/admin/dashboard/bookings/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/dashboard/bookings/page",pathname:"/admin/dashboard/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},87938:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,26840,23)),Promise.resolve().then(t.t.bind(t,38771,23)),Promise.resolve().then(t.t.bind(t,13225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,43982,23))},39960:(e,s,t)=>{Promise.resolve().then(t.bind(t,62705))},57111:(e,s,t)=>{Promise.resolve().then(t.bind(t,31393))},60790:(e,s,t)=>{Promise.resolve().then(t.bind(t,33269))},31393:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(95344),r=t(3729),i=t(47674),n=t(8428),l=t(44669);function c(){let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),{data:x,status:p}=(0,i.useSession)(),m=(0,n.useRouter)();(0,r.useEffect)(()=>{"unauthenticated"===p?m.push("/admin/login"):"authenticated"===p&&u()},[p,m]);let u=async()=>{try{d(!0);let e=await fetch("/api/bookings"),t=await e.json();s(t)}catch(e){l.Am.error("Failed to fetch bookings")}finally{d(!1)}},h=async(e,s)=>{try{if((await fetch(`/api/bookings/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok)l.Am.success("Booking status updated"),u();else throw Error("Failed to update")}catch(e){l.Am.error("Failed to update status")}},g=async e=>{if(confirm("Are you sure you want to delete this booking?"))try{if((await fetch(`/api/bookings/${e}`,{method:"DELETE"})).ok)l.Am.success("Booking deleted"),u(),t?._id===e&&c(null);else throw Error("Failed to delete")}catch(e){l.Am.error("Failed to delete booking")}};return o?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[var(--dzong-blue)]"})}):a.jsx("div",{className:"min-h-screen bg-[var(--rice-white)]",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-['Cinzel'] font-bold text-[var(--dzong-blue)]",children:"Booking Requests"}),a.jsx("div",{className:"h-1 w-32 bg-[var(--river-blue)] mt-2 rounded-full"})]}),(0,a.jsxs)("div",{className:"temple-card px-8 py-4 flex items-center gap-3",children:[a.jsx("i",{className:"bi bi-calendar-check text-2xl text-[var(--river-blue)]"}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-[var(--mountain-slate)] block text-sm",children:"Total Bookings"}),a.jsx("span",{className:"text-2xl font-bold text-[var(--dzong-blue)]",children:e.length})]})]})]}),a.jsx("div",{className:"temple-card overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-[var(--dzong-blue)] text-[var(--text-white)]",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Package"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Dates"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-['Cinzel'] uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-[var(--rice-white)] transition-all duration-200",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-person-circle text-[var(--river-blue)]"}),a.jsx("span",{className:"font-medium",children:`${e.firstName} ${e.lastName}`})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-envelope text-[var(--mountain-slate)]"}),e.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 bg-[var(--rice-white)] text-[var(--dzong-blue)] rounded-full text-sm font-medium",children:e.tourPackage})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[var(--mountain-slate)]",children:[a.jsx("i",{className:"bi bi-calendar-event"}),(0,a.jsxs)("span",{children:[new Date(e.arrivalDate).toLocaleDateString()," -"]}),a.jsx("span",{children:new Date(e.departureDate).toLocaleDateString()})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("select",{value:e.status,onChange:s=>h(e._id,s.target.value),className:`form-select ${"confirmed"===e.status?"bg-green-50 text-green-700":"cancelled"===e.status?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[a.jsx("option",{value:"pending",children:"⏳ Pending"}),a.jsx("option",{value:"confirmed",children:"✅ Confirmed"}),a.jsx("option",{value:"cancelled",children:"❌ Cancelled"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>c(e),className:"btn-primary py-2 px-4 flex items-center gap-2 text-sm",children:[a.jsx("i",{className:"bi bi-eye"})," View"]}),(0,a.jsxs)("button",{onClick:()=>g(e._id),className:"bg-[var(--prayer-red)] text-white px-4 py-2 rounded-lg hover:opacity-90 transition-all flex items-center gap-2 text-sm",children:[a.jsx("i",{className:"bi bi-trash"})," Delete"]})]})})]},e._id))})]})}),t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"booking-form max-w-4xl w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold font-['Cinzel'] text-[var(--dzong-blue)]",children:"Booking Details"}),a.jsx("div",{className:"h-1 w-24 bg-[var(--river-blue)] mt-2 rounded-full"})]}),a.jsx("button",{onClick:()=>c(null),className:"text-[var(--mountain-slate)] hover:text-[var(--dzong-blue)] transition-colors text-2xl",children:a.jsx("i",{className:"bi bi-x-lg"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-8 bg-[var(--rice-white)] p-6 rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-person text-[var(--river-blue)]"}),a.jsx("strong",{children:"Name:"})," ",t.firstName," ",t.lastName]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-envelope text-[var(--river-blue)]"}),a.jsx("strong",{children:"Email:"})," ",t.email]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-globe text-[var(--river-blue)]"}),a.jsx("strong",{children:"Nationality:"})," ",t.nationality]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-credit-card text-[var(--river-blue)]"}),a.jsx("strong",{children:"Passport:"})," ",t.passportNumber]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-hash text-[var(--river-blue)]"}),a.jsx("strong",{children:"Booking Reference:"})," ",t.bookingRef]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-bag text-[var(--river-blue)]"}),a.jsx("strong",{children:"Package:"})," ",t.tourPackage]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-people text-[var(--river-blue)]"}),a.jsx("strong",{children:"Group Size:"})," ",t.adults," adults, ",t.children||0," children"]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-calendar-check text-[var(--river-blue)]"}),a.jsx("strong",{children:"Arrival:"})," ",new Date(t.arrivalDate).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-calendar-x text-[var(--river-blue)]"}),a.jsx("strong",{children:"Departure:"})," ",new Date(t.departureDate).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-tag text-[var(--river-blue)]"}),a.jsx("strong",{children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${"confirmed"===t.status?"bg-green-100 text-green-700":"cancelled"===t.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]})]}),t.specialRequests&&(0,a.jsxs)("div",{className:"mt-6 bg-[var(--rice-white)] p-6 rounded-lg",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2 mb-2",children:[a.jsx("i",{className:"bi bi-chat-left-text text-[var(--river-blue)]"}),a.jsx("strong",{children:"Special Requests:"})]}),a.jsx("p",{className:"text-[var(--mountain-slate)] pl-6",children:t.specialRequests})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:(0,a.jsxs)("button",{onClick:()=>c(null),className:"btn-primary py-2 px-6 flex items-center gap-2",children:[a.jsx("i",{className:"bi bi-x-circle"})," Close"]})})]})})]})})}},33269:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(95344),r=t(47674),i=t(8428),n=t(3729);function l({children:e}){let{data:s,status:t}=(0,r.useSession)(),l=(0,i.useRouter)(),c="/admin/login"===(0,i.usePathname)();return((0,n.useEffect)(()=>{"loading"===t||s||c||l.push("/admin/login"),s&&c&&l.push("/admin/dashboard")},[s,t,l,c]),"loading"===t)?a.jsx("div",{className:"min-h-screen bg-[var(--rice-white)] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[var(--dzong-blue)] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-[var(--dzong-blue)] font-['Playfair_Display']",children:"Loading..."})]})}):e}function c({children:e}){return a.jsx(r.SessionProvider,{children:a.jsx(l,{children:e})})}},62705:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(95344),r=t(44669);function i({children:e}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(r.x7,{position:"top-right",toastOptions:{success:{duration:3e3,style:{background:"#4CAF50",color:"#fff",padding:"16px"}},error:{duration:3e3,style:{background:"#f44336",color:"#fff",padding:"16px"}},style:{border:"1px solid #ccc",padding:"16px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}}),e]})}},25509:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\admin\dashboard\bookings\page.jsx`),{__esModule:r,$$typeof:i}=a,n=a.default},48964:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\admin\layout.jsx`),{__esModule:r,$$typeof:i}=a,n=a.default},52308:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m,metadata:()=>p});var a=t(25036),r=t(13362),i=t.n(r),n=t(49828),l=t.n(n);t(5023);let c=(0,t(86843).createProxy)(String.raw`D:\Tshewang Lhamo\02220251_Project01 - Copy\src\app\providers.jsx`),{__esModule:o,$$typeof:d}=c,x=c.default,p={title:"Explore Bhutan - Your Gateway to the Land of Thunder Dragon",description:"Discover the magic of Bhutan with our curated tours, cultural experiences, and adventure packages.",keywords:"Bhutan, travel, tourism, Buddhist temples, Himalayan kingdom, cultural tours",authors:[{name:"Bhutan Travel"}],openGraph:{title:"Explore Bhutan - Your Gateway to the Land of Thunder Dragon",description:"Discover the magic of Bhutan with our curated tours, cultural experiences, and adventure packages.",url:"https://bhutan-travel.vercel.app",siteName:"Bhutan Travel",locale:"en_US",type:"website"}};function m({children:e}){return(0,a.jsxs)("html",{lang:"en",className:`${i().variable} ${l().variable}`,children:[a.jsx("head",{children:a.jsx("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"})}),a.jsx("body",{className:l().className,children:a.jsx(x,{children:e})})]})}},5023:()=>{}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,512,221],()=>t(28238));module.exports=a})();